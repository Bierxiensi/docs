(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{515:function(t,s,a){"use strict";a.r(s);var n=a(28),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("blockquote",[a("p",[t._v("åŸºäº TC39 çš„ "),a("a",{attrs:{href:"https://github.com/tc39/proposal-cancelable-promises",target:"_blank",rel:"noopener noreferrer"}},[t._v("cancelable promises proposal"),a("OutboundLink")],1),t._v(" æè®®å°è£…ï¼Œä½†æ˜¯è¿™ä¸ªæè®®å·²ç»è¢«å‘èµ·äººè‡ªå·±å–æ¶ˆäº†ï¼Œæ®è¯´æ˜¯å› ä¸º Google å†…éƒ¨åå¯¹æ„è§å¾ˆå¤§ï¼Œè¯¦æƒ…å¯ä»¥åˆ°ç›¸å…³ issue"),a("a",{attrs:{href:"https://github.com/tc39/proposal-cancelable-promises/issues/70",target:"_blank",rel:"noopener noreferrer"}},[t._v("Why was this proposal withdrawn?"),a("OutboundLink")],1),t._v("çœ‹ä¸€ä¸‹ã€‚")])]),t._v(" "),a("h1",{attrs:{id:"ä¸€ã€ç¯å¢ƒå‡†å¤‡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€ç¯å¢ƒå‡†å¤‡"}},[t._v("#")]),t._v(" ä¸€ã€ç¯å¢ƒå‡†å¤‡")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("axios")]),t._v(" ç‰ˆæœ¬ "),a("code",[t._v("v0.24.0")])])]),t._v(" "),a("li",[a("p",[t._v("é€šè¿‡ "),a("code",[t._v("github1s")]),t._v(" ç½‘é¡µå¯ä»¥ "),a("a",{attrs:{href:"https://github1s.com/axios/axios/blob/HEAD/CONTRIBUTING.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("æŸ¥çœ‹"),a("OutboundLink")],1),t._v(" axios æºç ")])]),t._v(" "),a("li",[a("p",[t._v("è°ƒè¯•éœ€è¦ "),a("code",[t._v("clone")]),t._v(" åˆ°æœ¬åœ°")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/axios/axios.git\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" axios\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" start\n\nhttp://localhost:3000/\n")])])]),a("h1",{attrs:{id:"äºŒã€å‡½æ•°ç ”è¯»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€å‡½æ•°ç ”è¯»"}},[t._v("#")]),t._v(" äºŒã€å‡½æ•°ç ”è¯»")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("cancel")]),t._v(" æ¨¡å—åŒ…å«ä¸‰ä¸ªæ–‡ä»¶"),a("code",[t._v("Cancel")]),t._v("ã€"),a("code",[t._v("CancelToken")]),t._v("ã€"),a("code",[t._v("isCancel")])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("â”œâ”€cancel "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å–æ¶ˆè¯·æ±‚")]),t._v("\nâ”‚   Cancel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\nâ”‚   CancelToken"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\nâ”‚   isCancel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n")])])]),a("h2",{attrs:{id:"_1-cancel-ç±»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-cancel-ç±»"}},[t._v("#")]),t._v(" 1. Cancel ç±»")]),t._v(" "),a("blockquote",[a("p",[t._v("A "),a("code",[t._v("Cancel")]),t._v(" is an object that is thrown when an operation is canceled.\nå½“æ“ä½œè¢«å–æ¶ˆæ—¶ä¼šæŠ›å‡ºä¸€ä¸ª "),a("code",[t._v("Cancel")]),t._v(" å¯¹è±¡")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Cancel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cancel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("toString")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Cancel"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('": "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cancel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__CANCEL__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cancel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("åªæœ‰ 8 è¡Œä»£ç ï¼Œå®ç°äº†ä¸€ä¸ª"),a("code",[t._v("Cancel")]),t._v(" ç±»")]),t._v(" "),a("li",[t._v("åŒ…å«ä¸€ä¸ªåŸå‹æ–¹æ³• "),a("code",[t._v("toString")]),t._v(" ï¼Œä¸€ä¸ªå®ä¾‹å±æ€§"),a("code",[t._v("__CANCEL__")])]),t._v(" "),a("li",[t._v("å®ä¾‹å±æ€§"),a("code",[t._v("__CANCEL__")]),t._v("è¢«è®¾å®šä¸º "),a("code",[t._v("true")]),t._v("ï¼Œæ˜¯ Cancel ç±»çš„æ ‡å¿—")])]),t._v(" "),a("p",[t._v("Tipsï¼šæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªè¯·æ±‚ä¼šæœ‰ä¸‰ç§çŠ¶æ€"),a("code",[t._v("è¯·æ±‚å‰")]),t._v("ã€"),a("code",[t._v("è¯·æ±‚ä¸­")]),t._v("ã€"),a("code",[t._v("è¯·æ±‚ç»“æŸ")]),t._v("ï¼Œå–æ¶ˆåŠ¨ä½œå¯èƒ½å‘ç”Ÿåœ¨å…¶ä¸­çš„ä»»ä½•ä¸€ä¸ªé˜¶æ®µã€‚ä¸åŒé˜¶æ®µå¯¹åº”çš„å–æ¶ˆé€»è¾‘åœ¨"),a("code",[t._v("axios")]),t._v("ä¸­æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸”åœ¨"),a("code",[t._v("è¯·æ±‚ä¸­")]),t._v("è¿™ä¸ªé˜¶æ®µï¼Œå‡½æ•°æ‰§è¡Œçš„é€»è¾‘ä½ç½®ä¹Ÿä¸ä¸€æ ·ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬å‘èµ·å–æ¶ˆè¯·æ±‚æ—¶ï¼Œ"),a("code",[t._v("axios")]),t._v("éœ€è¦ä¸€ç§æœºåˆ¶è·çŸ¥å½“å‰ç½‘ç»œè¯·æ±‚èµ°åˆ°äº†å“ªä¸ªé˜¶æ®µçš„å“ªä¸ªä½ç½®æ‰èƒ½æ‰§è¡Œå¯¹åº”çš„å–æ¶ˆå’Œè¿”å›é€»è¾‘ï¼Œ"),a("code",[t._v("Cancel")]),t._v(" ç±»å°±æ˜¯è¿™æ ·ä¸€ä¸ªæœºåˆ¶ã€‚")]),t._v(" "),a("h2",{attrs:{id:"_2-iscancel-å‡½æ•°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-iscancel-å‡½æ•°"}},[t._v("#")]),t._v(" 2. isCancel å‡½æ•°")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isCancel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__CANCEL__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("åªæœ‰ 3 è¡Œä»£ç ï¼Œé€šè¿‡ "),a("code",[t._v("Cancel")]),t._v(" çš„å®ä¾‹å±æ€§"),a("code",[t._v("__CANCEL__")]),t._v(" æ¥åˆ¤æ–­"),a("code",[t._v("value")]),t._v("æ˜¯å¦ä¸º "),a("code",[t._v("Cancel")]),t._v(" å®ä¾‹")]),t._v(" "),a("li",[t._v("å¯¼å‡ºä¸€ä¸ª "),a("code",[t._v("isCancel")]),t._v(" å‡½æ•°ï¼Œå¦‚æœå…¥å‚ "),a("code",[t._v("val")]),t._v(" ä¸æ˜¯ "),a("code",[t._v("Cancel")]),t._v("ç±»ä¼šè¿”å› "),a("code",[t._v("false")]),t._v("ï¼Œå¦åˆ™è¿”å› "),a("code",[t._v("true")])])]),t._v(" "),a("h2",{attrs:{id:"_3-canceltoken-ç±»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-canceltoken-ç±»"}},[t._v("#")]),t._v(" 3. CancelToken ç±»")]),t._v(" "),a("blockquote",[a("p",[t._v("A "),a("code",[t._v("CancelToken")]),t._v(" is an object that can be used to request cancellation of an operation.\n"),a("code",[t._v("CancelToken")]),t._v(" æ˜¯è¢«ç”¨äºå–æ¶ˆè¯·æ±‚æ“ä½œçš„ç±»")])]),t._v(" "),a("blockquote",[a("p",[t._v("å‚è€ƒæ–‡ç« "),a("code",[t._v("æ—æ™¯å®œçš„è®°äº‹æœ¬")]),t._v("æåˆ°è¿™æ˜¯ä¸€ä¸ª"),a("code",[t._v("è®©äººä¸€å¤´é›¾æ°´")]),t._v("çš„ç±»ï¼Œåˆšçœ‹çš„æ—¶å€™ç¬”è€…ä¹Ÿæœ‰åŒæ„Ÿï¼Œè™½ç„¶ç»è¿‡ä¸€äº›å‰–æç¬”è€…å·²ç»åˆ†æçš„å°½å¯èƒ½è¯¦ç»†ï¼ˆè‡ªæˆ‘æ„Ÿè§‰è‰¯å¥½ ğŸ¶ï¼‰ï¼Œä½†åœ¨è§‚çœ‹ä¹‹å‰è¿˜æ˜¯æ¨èä¸äº†è§£è®¾è®¡æ¨¡å¼çš„å°ä¼™ä¼´å»äº†è§£ä¸€ä¸‹å…¶ä¸­çš„"),a("code",[t._v("å‘å¸ƒ/è®¢é˜…")]),t._v("æ¨¡å¼ï¼Œä¼šæœ‰åŠ©äºç†è§£")])]),t._v(" "),a("h3",{attrs:{id:"ã€2-1ã€‘-å¼•å…¥-cancel-ç±»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ã€2-1ã€‘-å¼•å…¥-cancel-ç±»"}},[t._v("#")]),t._v(" ã€2.1ã€‘ å¼•å…¥ Cancel ç±»")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" Cancel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Cancel"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"ã€2-2ã€‘-å†…éƒ¨å‡½æ•°-canceltoken"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ã€2-2ã€‘-å†…éƒ¨å‡½æ•°-canceltoken"}},[t._v("#")]),t._v(" ã€2.2ã€‘ å†…éƒ¨å‡½æ•° CancelToken")]),t._v(" "),a("blockquote",[a("p",[t._v("ä¸¤æ®µ"),a("code",[t._v("this.promise.then")]),t._v("å¹¶ä¸æ˜¯å–æ¶ˆé€»è¾‘ï¼Œæš‚æ—¶å…ˆå¿½ç•¥")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CancelToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("executor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" executor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"function"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TypeError")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"executor must be a function."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" resolvePromise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promise "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("promiseExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        resolvePromise "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" token "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// eslint-disable-next-line func-names")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cancel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_listeners"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" l "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_listeners"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" l"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_listeners"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cancel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_listeners "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// eslint-disable-next-line func-names")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("then")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("onfulfilled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// eslint-disable-next-line func-names")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" promise "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            _resolve "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("onfulfilled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("cancel")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unsubscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("executor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reason"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Cancellation has already been requested")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reason "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cancel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolvePromise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reason"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æ¥ä¸‹æ¥æŒ‰è¡Œåˆ†æ")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("1. é¦–å…ˆåˆ¤æ–­å…¥å‚"),a("code",[t._v("executor")]),t._v("æ˜¯å¦æ˜¯ function ç±»å‹ï¼Œå¦‚æœä¸æ˜¯ä¼šæŠ›å‡ºç±»å‹é”™ TypeError")]),t._v(" "),a("ul",[a("li",[t._v("ä¸ºä»€ä¹ˆå…¥å‚"),a("code",[t._v("executor")]),t._v("æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ")]),t._v(" "),a("li",[t._v("ç­”ï¼š"),a("code",[t._v("CancelToken")]),t._v("é€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼æ¥å®ç°ä¼ é€’å–æ¶ˆä¿¡æ¯ï¼Œè®¢é˜…è€…æŠŠè‡ªå·±æƒ³è®¢é˜…çš„äº‹ä»¶"),a("code",[t._v("cancel/c")]),t._v("æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒ"),a("code",[t._v("CancelToken")]),t._v("ï¼Œå½“é€‚é…å™¨è¿”å›ä¿¡æ¯æ—¶å‘å¸ƒè€…å‘å¸ƒåˆ°è°ƒåº¦ä¸­å¿ƒ"),a("code",[t._v("CancelToken")]),t._v("ï¼Œè°ƒåº¦ä¸­å¿ƒå†ç»Ÿä¸€è°ƒåº¦æ‰§è¡Œè®¢é˜…è€…æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒçš„å¤„ç†ä»£ç "),a("code",[t._v("cancel")]),t._v("ã€‚è¿™ä¹Ÿå°±ç†è§£äº†è¿™ä¸ªå‡½æ•°ä¸ºä»€ä¹ˆå«"),a("code",[t._v("executor-æ‰§è¡Œå™¨")]),t._v("ã€‚")])])]),t._v(" "),a("li",[a("p",[t._v("2. åˆ›å»ºå…¨å±€å˜é‡"),a("code",[t._v("resolvePromise")])]),t._v(" "),a("ul",[a("li",[t._v("ä¸ºä»€ä¹ˆè¦åˆ›å»ºè¿™ä¸ªå˜é‡ï¼Ÿä¸ºä»€ä¹ˆè¦ä»¥å…¨å±€çš„æ–¹å¼åˆ›å»ºï¼Ÿ")]),t._v(" "),a("li",[t._v("ç­”ï¼šä¸ºäº†æ‹¿åˆ°"),a("code",[t._v("resolve")]),t._v("ä¾¿äºåç»­çš„é“¾å¼è°ƒç”¨ï¼Œä¸”åªæœ‰å…¨å±€å˜é‡æ‰èƒ½"),a("code",[t._v("ç©¿è¿‡å‡½æ•°ä½œç”¨åŸŸ")]),t._v("æ‹¿åˆ° "),a("code",[t._v("resolve")]),t._v(" å€¼")])])]),t._v(" "),a("li",[a("p",[t._v("3. ä½¿ç”¨"),a("code",[t._v("new Promise()")]),t._v("åˆ›å»ºå‡½æ•°"),a("code",[t._v("promiseExecutor")]),t._v("çš„å®ä¾‹å¯¹è±¡ï¼Œè¡¨æ˜"),a("code",[t._v("executor")]),t._v("æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå…¶è¿”å›å€¼"),a("code",[t._v("resolve")]),t._v("ä¼ é€’ç»™å…¨å±€å˜é‡"),a("code",[t._v("resolvePromise")]),t._v("ï¼Œè°ƒç”¨æ—¶å¯ä½¿ç”¨"),a("code",[t._v("this.promise.then()")]),t._v("è·å–è¿”å›å€¼"),a("code",[t._v("resolve")]),t._v("æˆ–ç›´æ¥ä½¿ç”¨"),a("code",[t._v("resolvePromise")])]),t._v(" "),a("ul",[a("li",[t._v("ä¸ºä»€ä¹ˆåˆ›å»º "),a("code",[t._v("promise")]),t._v(" å¯¹è±¡?")]),t._v(" "),a("li",[t._v("å› ä¸ºçœŸæ­£å–æ¶ˆè¯·æ±‚çš„åŠ¨ä½œ"),a("code",[t._v("request.abort()")]),t._v("åœ¨é€‚é…å™¨"),a("code",[t._v("xhr.js")]),t._v("æˆ–"),a("code",[t._v("http.js")]),t._v("é‡Œè§¦å‘ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„æ–¹æ³•ï¼Œå½“è¿™ä¸ªåŠ¨ä½œå‘ç”Ÿåæˆ‘ä»¬æ‰èƒ½åœ¨ "),a("code",[t._v("resolve")]),t._v(" ä¸­æ‹¿åˆ°è¿”å›å€¼")])])]),t._v(" "),a("li",[a("p",[t._v("4. åˆ›å»ºå…¨å±€å˜é‡"),a("code",[t._v("token")]),t._v("è¡¨ç¤ºå½“å‰"),a("code",[t._v("CancelToken")]),t._v("çš„å®ä¾‹")])]),t._v(" "),a("li",[a("p",[t._v("5. "),a("code",[t._v("executor")]),t._v("æ‰§è¡Œå™¨æ‰§è¡Œè®¢é˜…è€…äº‹ä»¶"),a("code",[t._v("cancel")]),t._v(" ï¼Œè¯¥æ–¹æ³•å…¥å‚"),a("code",[t._v("message")]),t._v("æ¥è‡ªç”¨æˆ·è°ƒç”¨æ—¶ä¼ å‚")])]),t._v(" "),a("li",[a("p",[t._v("6. è®¢é˜…è€…äº‹ä»¶"),a("code",[t._v("cancel")]),t._v("åœ¨æ‰§è¡Œæ—¶é¦–å…ˆä¼šåˆ¤æ–­å®ä¾‹"),a("code",[t._v("token")]),t._v("æ˜¯å¦å­˜åœ¨"),a("code",[t._v("reason")]),t._v("å±æ€§å€¼ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥è¿”å›ï¼Œå¦åˆ™ä½¿ç”¨"),a("code",[t._v("new Cancel()")]),t._v("å£°æ˜ä¸€ä¸ª cancel ç±»ç»™"),a("code",[t._v("reason")]),t._v("èµ‹å€¼")]),t._v(" "),a("ul",[a("li",[t._v("ä¸ºä»€ä¹ˆç”¨"),a("code",[t._v("new Cancel()")]),t._v("å£°æ˜ä¸€ä¸ª cancel ç±»ç»™"),a("code",[t._v("reason")]),t._v("èµ‹å€¼ï¼Ÿ")]),t._v(" "),a("li",[t._v("ç­”ï¼šè¿™æ ·"),a("code",[t._v("reason")]),t._v("çš„åŸå‹é“¾ä¸Šä¼šæŒ‚è½½ä¸€ä¸ª"),a("code",[t._v("__CANCEL__")]),t._v("è¡¨ç¤º cancel ç±»ï¼ŒåŒæ—¶é…åˆ"),a("code",[t._v("resolvePromise")]),t._v("æ‰§è¡Œä¼šæŠŠ"),a("code",[t._v("this.promise")]),t._v("å®ä¾‹çŠ¶æ€æ”¹ä¸º"),a("code",[t._v("fulfilled")]),t._v("ï¼Œè¿™æ„å‘³ç€æ˜¯ç”¨æˆ·ä¸»åŠ¨å–æ¶ˆè¯·æ±‚è¿”å›çš„ä¿¡æ¯è€Œéå› ä¸ºå…¶ä»–å¼‚å¸¸è¿”å›ï¼ˆä¼šæŠŠ"),a("code",[t._v("this.promise")]),t._v("å®ä¾‹çŠ¶æ€æ”¹ä¸º"),a("code",[t._v("reject")]),t._v("ï¼‰")])])])]),t._v(" "),a("p",[a("strong",[a("code",[t._v("CancelToken")]),t._v(" æ„é€ å‡½æ•°å°±æ˜¯ä¸€ä¸ªå‘å¸ƒè®¢é˜…å‡½æ•°ï¼Œé€šè¿‡å‘å¸ƒè®¢é˜…è§¦å‘å‘å¤– "),a("code",[t._v("resolve")]),t._v(" æˆ–è€…æŠ›å‡ºé”™è¯¯ï¼ˆ"),a("code",[t._v("reject")]),t._v("ï¼‰ï¼Œ"),a("code",[t._v("Promise")]),t._v(" é“¾å¼ç»“æ„æˆåŠŸæ‹¿åˆ°"),a("code",[t._v("resolve")]),t._v("å€¼æˆ–è€… "),a("code",[t._v("catch")]),t._v(" åˆ°é”™è¯¯åï¼Œä¼šè¿”å›ç”¨æˆ·çš„è¾“å…¥"),a("code",[t._v("message")]),t._v("æˆ–åœæ­¢ç»§ç»­æ‰§è¡Œå¹¶æ‰§è¡Œé”™è¯¯å›è°ƒã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ã€2-3ã€‘-æ·»åŠ åŸå‹æ–¹æ³•-throwifrequested"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ã€2-3ã€‘-æ·»åŠ åŸå‹æ–¹æ³•-throwifrequested"}},[t._v("#")]),t._v(" ã€2.3ã€‘ æ·»åŠ åŸå‹æ–¹æ³• throwIfRequested")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Throws a `Cancel` if cancellation has been requested.\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CancelToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("throwIfRequested")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("throwIfRequested")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reason"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reason"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("å¦‚æœå·²è§¦å‘å–æ¶ˆäº‹ä»¶ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªé”™è¯¯ä¿¡æ¯")])]),t._v(" "),a("h3",{attrs:{id:"ã€2-4ã€‘-source"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ã€2-4ã€‘-source"}},[t._v("#")]),t._v(" ã€2.4ã€‘ source")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */")]),t._v("\nCancelToken"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("source")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" cancel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" token "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CancelToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("executor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("c")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        cancel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("token")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cancel")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" cancel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("åˆå§‹åŒ–æ—¶è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æ–°çš„"),a("code",[t._v("CancelToken")]),t._v("å¯¹è±¡ "),a("code",[t._v("token")]),t._v(" å’Œå‡½æ•° "),a("code",[t._v("cancel")])]),t._v(" "),a("li",[t._v("æ‰§è¡Œæ—¶è®¢é˜…è€…ä¼šå°†è®¢é˜…äº‹ä»¶"),a("code",[t._v("c")]),t._v("æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒ"),a("code",[t._v("CancelToken")]),t._v("ï¼Œè°ƒåº¦ä¸­å¿ƒåœ¨æ‰§è¡Œå™¨"),a("code",[t._v("executor")]),t._v("ä¸­ç«‹å³æ‰§è¡Œè®¢é˜…è€…äº‹ä»¶")]),t._v(" "),a("li",[a("code",[t._v("cancel")]),t._v("å‡½æ•°é€šè¿‡"),a("code",[t._v("å…¨å±€ä½œç”¨åŸŸ")]),t._v("æ‹¿åˆ°"),a("code",[t._v("c")]),t._v("ï¼Œé€šè¿‡ "),a("code",[t._v("return")]),t._v(" æš´éœ²ç»™ç”¨æˆ·ä¸€ä¸ªè®¢é˜…äº‹ä»¶çš„å…¥å£")])]),t._v(" "),a("h3",{attrs:{id:"ã€2-5ã€‘-æ·»åŠ åŸå‹æ–¹æ³•-subscribe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ã€2-5ã€‘-æ·»åŠ åŸå‹æ–¹æ³•-subscribe"}},[t._v("#")]),t._v(" ã€2.5ã€‘ æ·»åŠ åŸå‹æ–¹æ³• subscribe")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Subscribe to the cancel signal\n */")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CancelToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("subscribe")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("listener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reason"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reason"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_listeners"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_listeners"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_listeners "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("æ·»åŠ è®¢é˜…æ—¶æ‰§è¡Œçš„å‡½æ•°ï¼Œè®¢é˜…äº‹ä»¶"),a("code",[t._v("cancel")]),t._v("è¢«æ‰§è¡Œæ—¶ï¼Œä¼šå‘å½“å‰å®ä¾‹çš„"),a("code",[t._v("_listeners")]),t._v("å±æ€§ä¸Šè¿½åŠ é“¾å¼è°ƒç”¨çš„è¿”å›å€¼")])]),t._v(" "),a("h3",{attrs:{id:"ã€2-6ã€‘-æ·»åŠ åŸå‹æ–¹æ³•-unsubscribe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ã€2-6ã€‘-æ·»åŠ åŸå‹æ–¹æ³•-unsubscribe"}},[t._v("#")]),t._v(" ã€2.6ã€‘ æ·»åŠ åŸå‹æ–¹æ³• unsubscribe")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Unsubscribe from the cancel signal\n */")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CancelToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("unsubscribe")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unsubscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("listener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_listeners"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" index "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_listeners"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_listeners"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("splice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("æ·»åŠ è®¢é˜…æ—¶çš„æ‰§è¡Œçš„å‡½æ•°ï¼Œè®¢é˜…äº‹ä»¶"),a("code",[t._v("cancel")]),t._v("è¢«æ‰§è¡Œæ—¶ï¼Œå¦‚æœæ˜¯é‡å¤å–æ¶ˆå°±ç§»é™¤å½“å‰å®ä¾‹çš„"),a("code",[t._v("_listeners")]),t._v("å±æ€§ä¸Šå¯¹åº”ä½ç½®çš„é“¾å¼è°ƒç”¨")])]),t._v(" "),a("h1",{attrs:{id:"ä¸‰ã€å‚è€ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€å‚è€ƒ"}},[t._v("#")]),t._v(" ä¸‰ã€å‚è€ƒ")]),t._v(" "),a("p",[t._v("1. "),a("code",[t._v("ä»™å‡Œé˜")]),t._v("çš„æ–‡ç« "),a("a",{attrs:{href:"https://blog.csdn.net/qq_39221436/article/details/120652086",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¯¦ç»† Axios æºç è§£è¯»"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("2. "),a("code",[t._v("æ—æ™¯å®œ")]),t._v("çš„æ–‡ç« "),a("a",{attrs:{href:"https://linjingyi.cn/posts/fe9fb5af.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ—æ™¯å®œçš„è®°äº‹æœ¬ - Axios æºç è§£æï¼ˆäºŒï¼‰ï¼šé€šç”¨å·¥å…·æ–¹æ³•"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("3. "),a("code",[t._v("è‹¥å·")]),t._v("çš„æ–‡ç« "),a("a",{attrs:{href:"https://juejin.cn/post/6844904019987529735#heading-26",target:"_blank",rel:"noopener noreferrer"}},[t._v("å­¦ä¹  axios æºç æ•´ä½“æ¶æ„ï¼Œæ‰“é€ å±äºè‡ªå·±çš„è¯·æ±‚åº“"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("4. "),a("code",[t._v("æ°å‡Œ")]),t._v("çš„æ–‡ç« "),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/376289400",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ·±å…¥è§£è¯» axios æºç "),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("5. "),a("code",[t._v("æµ·è§’åœ¨çœ¼å‰")]),t._v("çš„æ–‡ç« "),a("a",{attrs:{href:"https://www.cnblogs.com/lovesong/p/5272752.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("è®¾è®¡æ¨¡å¼ï¼ˆä¸‰ï¼‰ï¼šè§‚å¯Ÿè€…æ¨¡å¼ä¸å‘å¸ƒ/è®¢é˜…æ¨¡å¼åŒºåˆ«"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);